/* Copyright by PaweÅ‚ Klockiewicz; MIT licensed */
$.fn.loadMore=function(e){var t=!1,n=$.extend({containerSelector:"#posts",requestUrl:"objects.php?page=",requestOnStart:!0,requestOnScroll:!1,loadingSelector:"#loading",onComplete:null},e);function o(){$(n.loadingSelector).hide()}function r(e){$(e).hide()}function l(e,t){$(t).attr("data-page",e)}function i(e){if(!t){t=!0,$(n.loadingSelector).show(),r(e);var i=parseInt($(e).attr("data-page"))+1;$.get(n.requestUrl+i,function(r,c){o(),l(i,e),$(e).parent(n.containerSelector).length?$(e).before(r):$(n.containerSelector).append(r),n.requestOnScroll||$(e).show(),$.isFunction(n.onComplete)&&n.onComplete.call(e),t=!1}).fail(function(){console.log("Can't load content..."),o(),r(e)})}}return this.each(function(){l(0,this),n.requestOnStart&&i(this),n.requestOnScroll?$(document).on("scroll",function(){var e,t;e=this,t=$(n.containerSelector).outerHeight(),window.innerHeight+$(window).scrollTop()>=t&&i(e)}):$(this).on("click",function(e){e.preventDefault(),i(this)})})};